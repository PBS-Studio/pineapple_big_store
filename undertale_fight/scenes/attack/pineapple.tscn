[gd_scene load_steps=15 format=3 uid="uid://jy27citiatp4"]

[ext_resource type="Texture2D" uid="uid://dfaqb3o4pmu56" path="res://undertale_fight/assets/custom/pineapple_0001.png" id="1_432hf"]
[ext_resource type="Script" path="res://undertale_fight/scripts/attack/pineapple.gd" id="1_jossc"]
[ext_resource type="FontFile" uid="uid://cqmxlxonew8a5" path="res://assets/fonts/Cubic_11/fonts/ttf/Cubic_11_1.100_R.ttf" id="1_w3hwy"]
[ext_resource type="Texture2D" uid="uid://bbt6qenvxac4c" path="res://undertale_fight/assets/custom/pineapple_0002.png" id="2_ikshd"]
[ext_resource type="Texture2D" uid="uid://bqx7d2x7k0yp8" path="res://undertale_fight/assets/custom/pineapple_0003.png" id="3_3j5ex"]
[ext_resource type="AudioStream" uid="uid://d3h3p43kq63gy" path="res://undertale_fight/assets/sound/mus_sfx_a_target.wav" id="3_c38yi"]
[ext_resource type="Texture2D" uid="uid://biejfeu6e32ea" path="res://undertale_fight/assets/custom/pineapple_0004.png" id="4_hwamw"]
[ext_resource type="Texture2D" uid="uid://cukd2bd61s4y4" path="res://undertale_fight/assets/custom/pineapple_0005.png" id="5_lrnme"]
[ext_resource type="AudioStream" uid="uid://bv55t1khgj88l" path="res://undertale_fight/assets/sound/snd_bombsplosion.wav" id="10_ys27u"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_roynf"]
bg_color = Color(0, 0, 0, 0)
border_width_left = 5
border_width_top = 5
border_width_right = 5
border_width_bottom = 5
border_color = Color(1, 0.25098, 0.25098, 1)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2dw3s"]
size = Vector2(90, 90)

[sub_resource type="SpriteFrames" id="SpriteFrames_nwg2m"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("1_432hf")
}, {
"duration": 1.0,
"texture": ExtResource("2_ikshd")
}, {
"duration": 1.0,
"texture": ExtResource("3_3j5ex")
}, {
"duration": 1.0,
"texture": ExtResource("4_hwamw")
}, {
"duration": 1.0,
"texture": ExtResource("5_lrnme")
}],
"loop": false,
"name": &"explode",
"speed": 15.0
}]

[sub_resource type="Animation" id="Animation_grd57"]
resource_name = "fall"
length = 2.0
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Pineapple:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.4, 1),
"transitions": PackedFloat32Array(1.8025, 1),
"update": 0,
"values": [Vector2(223, -650), Vector2(0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Warning:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [true, false, true, false, true, false, true, false]
}
tracks/2/type = "method"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Pineapple/Pineapple")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(1),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [&"explode", 1.0, false],
"method": &"play"
}]
}
tracks/3/type = "method"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath(".")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(1.2),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"spawn_piece"
}]
}
tracks/4/type = "method"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("WarningSound")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0.15, 0.3, 0.45, 0.6),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"values": [{
"args": [0.0],
"method": &"play"
}, {
"args": [0.0],
"method": &"play"
}, {
"args": [0.0],
"method": &"play"
}, {
"args": [0.0],
"method": &"play"
}]
}
tracks/5/type = "method"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("ExpoldeSound")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(1),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [0.0],
"method": &"play"
}]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ppr0e"]
_data = {
"fall": SubResource("Animation_grd57")
}

[node name="Pineapple" type="Node2D"]
texture_filter = 1
script = ExtResource("1_jossc")

[node name="Warning" type="Panel" parent="."]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -50.0
offset_top = -50.0
offset_right = 50.0
offset_bottom = 50.0
grow_horizontal = 2
grow_vertical = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_roynf")

[node name="WarningArea" type="Area2D" parent="Warning"]
unique_name_in_owner = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="Warning/WarningArea"]
position = Vector2(50, 50)
shape = SubResource("RectangleShape2D_2dw3s")

[node name="Label" type="Label" parent="Warning"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -29.0
offset_top = -56.0
offset_right = 4.0
offset_bottom = 62.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(2.24, 1)
theme_override_colors/font_color = Color(1, 0.25098, 0.25098, 1)
theme_override_fonts/font = ExtResource("1_w3hwy")
theme_override_font_sizes/font_size = 100
text = "!"
vertical_alignment = 1

[node name="Pineapple" type="Node2D" parent="."]
position = Vector2(223, -650)

[node name="Pineapple" type="AnimatedSprite2D" parent="Pineapple"]
position = Vector2(6, -28)
rotation = 0.331613
scale = Vector2(5.65625, 5.65625)
sprite_frames = SubResource("SpriteFrames_nwg2m")
animation = &"explode"

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_ppr0e")
}

[node name="WarningSound" type="AudioStreamPlayer" parent="."]
stream = ExtResource("3_c38yi")

[node name="ExpoldeSound" type="AudioStreamPlayer" parent="."]
stream = ExtResource("10_ys27u")

[connection signal="animation_finished" from="Pineapple/Pineapple" to="." method="_on_pineapple_animation_finished"]
